# addruby 
- **『小説家になろう』『カクヨム』のルビ用記号（記法が同じ）を付与する機能**  
- ルビを付与したい範囲を選択して、`Ctrl+Shift+P`->`ルビ振り`を選択（ショートカット登録すると便利かもしれない）
    - `任意の文字`->`|任意の文字《》`となる
    - ~~カーソルは勝手に《》の内側に移動する~~
        - ~~問題が発覚したため、無効化しました(1.0.1)~~
            - 再実装(1.0.2)
    - **機能テストをしっかり行えていません……**
        - 2,3時間で作成してそのままアップロードしてます
        - 想定外の動きをするかもしれません
            - 特にカーソル移動。処理を変えることで治ったように見えるけど……
- 問題点、要望等あれば、MarketplaceのQ&A機能や、[Twitter@R1dge919](https://twitter.com/R1dge919)まで

---

## 機能

- <u>選択している文字列に対し、ルビ用の記号を付与する</u>
    - `文字`->`|文字《》`
    - カーソルは読み仮名のカッコ内に移動
- おまけ機能（条件分岐の練習。不具合に繋がっているかもしれません）
    - <u>文字列が『小説家になろう』の挿絵用URLであれば、専用形式に変換する</u>
        - https://syosetu.com/man/sashie/
        - Webマニュアルの例
            - `https://23.mitemin.net/i3724/`->`<i3724|23>`
    - 記号を付与済み（読み仮名は打っていない状態）であれば、~~付与した記号を削除する~~
        - 改めて、傍点をつける（1文字1文字のルビに・を入れる）機能にしてみました。
        - `|文字《》`->`|文《・》|字《・》`
    - 文字列を選択していない場合、記号が追加されるだけ(1.0.3で追加)
        - カーソル位置は読み仮名カッコの手前（読み仮名を振りたい字を打つ部分）に移動する


---

## 既知の問題点
（問題点というか、不便かもしれない点。要望があって、気が向いている、かつ改善できそうな手法があれば、アップデートするかも）
- カーソル移動機能をユーザー側で無効化できない
    - ユーザー側でオンオフできるようにしたいところ
- 複数選択に対しては機能しない
    - 文字列を複数選択して、すべてに同時にルビ用記号を与えることがあるのか分からないので実装を見送り。
- `Ctrl+Shift+P`のコマンドリスト上に表示されるコマンド名が日本語
    - 検索時に不便かもしれない
    - （これに関しては、修正は容易に行えると思うので、要望があれば直ちに行います）
- ルビ開始記号の縦棒は「|」（半角）・「｜」（全角）のどちらでもいい。特に理由なく半角で実装。
    - 人によっては書いてて見づらいかもしれない
    - ユーザー側に設定で自由に変更できるようにしたいところ

---
### 1.0.0 (2021/02/03)

- リリース

### 1.0.1 (2021/02/04)

- カーソル移動に問題があったため、機能を無効化

### 1.0.2 (2021/02/04)

- カーソル移動機能を再実装（処理を変更）

### 1.0.3 (2021/02/04)

- 文字列を指定していない場合のカーソル位置を、カッコの手前に位置するように変更

### [1.0.4] (2021/02/20)

- 記号付与済み（読み仮名未入力）の文字列に対する処理を変更
    - OLD：`|文字《》`->`文字`（記号を消すだけ）
    - NEW：`|文字《》`->`|文《・》|字《・》`（傍点を付与）